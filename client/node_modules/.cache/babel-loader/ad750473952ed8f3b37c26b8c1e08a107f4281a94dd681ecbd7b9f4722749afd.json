{"ast":null,"code":"import _regeneratorRuntime from\"/Users/aarushisingh/Projects/counter-offer/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/aarushisingh/Projects/counter-offer/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/aarushisingh/Projects/counter-offer/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useCallback,useEffect}from'react';import axios from'axios';import Room from'./Room';import Button from'react-bootstrap/Button';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var VideoChat=function VideoChat(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(props.room),_useState4=_slicedToArray(_useState3,2),roomName=_useState4[0],setRoomName=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),token=_useState6[0],setToken=_useState6[1];// useEffect(() => {\n// }, [props.room]);\nvar handleSubmit=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();// const data = await axios.post('http://10.150.243.219:3001/video/token', JSON.stringify({\n_context.next=3;return axios.post('http://localhost:3001/video/token',JSON.stringify({identity:'props.room'+window.location.href.split(\"/\")[window.location.href.split(\"/\").length-1],room:props.room}),{headers:{\"Content-Type\":\"application/json\"}}).then(function(res){console.log(res);return res.data;});case 3:data=_context.sent;setToken(data.token);case 5:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}(),[roomName,username]);var handleLogout=useCallback(function(event){setToken(null);},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleSubmit,children:\"Join Video Call\"}),/*#__PURE__*/_jsx(Room,{roomName:roomName,token:token,handleLogout:handleLogout})]});};export default VideoChat;","map":{"version":3,"names":["React","useState","useCallback","useEffect","axios","Room","Button","VideoChat","props","username","setUsername","room","roomName","setRoomName","token","setToken","handleSubmit","event","preventDefault","post","JSON","stringify","identity","window","location","href","split","length","headers","then","res","console","log","data","handleLogout"],"sources":["/Users/aarushisingh/Projects/counter-offer/client/src/components/VideoChat.js"],"sourcesContent":["import React, { useState, useCallback, useEffect } from 'react';\nimport axios from 'axios'\nimport Room from './Room';\nimport Button from 'react-bootstrap/Button'\n\nconst VideoChat = (props) => {\n  const [username, setUsername] = useState('');\n  const [roomName, setRoomName] = useState(props.room);\n  const [token, setToken] = useState(null);\n\n  // useEffect(() => {\n\n\n  // }, [props.room]);\n\n  const handleSubmit = useCallback(\n    async event => {\n      event.preventDefault();\n      // const data = await axios.post('http://10.150.243.219:3001/video/token', JSON.stringify({\n        const data = await axios.post('http://localhost:3001/video/token', JSON.stringify({\n          identity: 'props.room' + window.location.href.split(\"/\")[window.location.href.split(\"/\").length - 1],\n          room: props.room\n        }), {headers:{\"Content-Type\" : \"application/json\"}}).then(res => {\n        console.log(res)\n        return (\n          res.data\n        )\n      });\n      setToken(data.token);\n    },\n    [roomName, username]\n  );\n\n  const handleLogout = useCallback(event => {\n    setToken(null);\n  }, []);\n\n  return (\n    <>\n        <Button onClick={handleSubmit}>Join Video Call</Button>\n        <Room roomName={roomName} token={token} handleLogout={handleLogout} />\n    </>\n  )\n};\n\nexport default VideoChat;"],"mappings":"qaAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,WAAW,CAAEC,SAAS,KAAQ,OAAO,CAC/D,MAAOC,MAAK,KAAM,OAAO,CACzB,MAAOC,KAAI,KAAM,QAAQ,CACzB,MAAOC,OAAM,KAAM,wBAAwB,8IAE3C,GAAMC,UAAS,CAAG,QAAZA,UAAS,CAAIC,KAAK,CAAK,CAC3B,cAAgCP,QAAQ,CAAC,EAAE,CAAC,wCAArCQ,QAAQ,eAAEC,WAAW,eAC5B,eAAgCT,QAAQ,CAACO,KAAK,CAACG,IAAI,CAAC,yCAA7CC,QAAQ,eAAEC,WAAW,eAC5B,eAA0BZ,QAAQ,CAAC,IAAI,CAAC,yCAAjCa,KAAK,eAAEC,QAAQ,eAEtB;AAGA;AAEA,GAAMC,aAAY,CAAGd,WAAW,4FAC9B,iBAAMe,KAAK,4HACTA,KAAK,CAACC,cAAc,EAAE,CACtB;AAAA,sBACqBd,MAAK,CAACe,IAAI,CAAC,mCAAmC,CAAEC,IAAI,CAACC,SAAS,CAAC,CAChFC,QAAQ,CAAE,YAAY,CAAGC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAACC,KAAK,CAAC,GAAG,CAAC,CAACH,MAAM,CAACC,QAAQ,CAACC,IAAI,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,MAAM,CAAG,CAAC,CAAC,CACpGhB,IAAI,CAAEH,KAAK,CAACG,IACd,CAAC,CAAC,CAAE,CAACiB,OAAO,CAAC,CAAC,cAAc,CAAG,kBAAkB,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,SAAAC,GAAG,CAAI,CACjEC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAChB,MACEA,IAAG,CAACG,IAAI,CAEZ,CAAC,CAAC,QARMA,IAAI,eASZlB,QAAQ,CAACkB,IAAI,CAACnB,KAAK,CAAC,CAAC,qDACtB,+DACD,CAACF,QAAQ,CAAEH,QAAQ,CAAC,CACrB,CAED,GAAMyB,aAAY,CAAGhC,WAAW,CAAC,SAAAe,KAAK,CAAI,CACxCF,QAAQ,CAAC,IAAI,CAAC,CAChB,CAAC,CAAE,EAAE,CAAC,CAEN,mBACE,wCACI,KAAC,MAAM,EAAC,OAAO,CAAEC,YAAa,UAAC,iBAAe,EAAS,cACvD,KAAC,IAAI,EAAC,QAAQ,CAAEJ,QAAS,CAAC,KAAK,CAAEE,KAAM,CAAC,YAAY,CAAEoB,YAAa,EAAG,GACvE,CAEP,CAAC,CAED,cAAe3B,UAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}